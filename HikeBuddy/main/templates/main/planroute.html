{% extends 'main/base.html' %}

{% block title %}
	{% if user.is_authenticated and user.groups.get.name == 'guide' %}
			Add Routes
	{% else %}
			Plan Route
	{% endif %}
{% endblock %}

{% block style %}
	tr.border_bottom td {
  	border-bottom: 1px solid black;
	}
	tr.border_bottom_b td {
  	border-bottom: 2px solid black;
	}
	.blue {
  	background-color: rgba(85,144,255,.25);
	}
	.white {
  	background-color: rgba(255,255,255,.25);
	}
 .overlay_flight_traveldil {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.7);
  transition: opacity 500ms;
  visibility: hidden;
  opacity: 0;
}
.overlay_flight_traveldil:target {
  visibility: visible;
  opacity: 1;
}
.popup_flight_travlDil {
  margin: 70px auto;
  padding: 20px;
  background: #fff;
  border-radius: 5px;
  width: 30%;
  position: relative;
  transition: all 2s ease-in-out;
}
.popup_flight_travlDil .close_flight_travelDl {
  position: absolute;
  top: 20px;
  right: 30px;
  transition: all 200ms;
  font-size: 30px;
  font-weight: bold;
  text-decoration: none;
  color: #333;
}
.popup_flight_travlDil .content_flightht_travel_dil {
  max-height: 30%;
  overflow: auto;
}
{% endblock %}

{% load crispy_forms_tags %}

{% block content %}

{% if user.is_authenticated and user.groups.get.name == 'guide' %}
	<center><h1>Add Routes</h1></center>
{% else %}
	<center><h1>Plan Route</h1></center>
{% endif %}

{% if not user.is_authenticated %}
	<a href="/login/"><p>Login</p></a>
	<p>Not registered yet? <a href="/signup/">Sign up</a></p>
{% elif not show %}

<p>You haven't added any guide info yet! <br>
You must provide some guide info in order to add routes to your profile.</p>
<form method="POST" action="/guideinfo/" class="form-group">
	{% csrf_token %}
	{{form|crispy}}
	<center>
		<button type="submit" class="btn btn-primary">Add guide info</button>
	</center>
</form>


{% else %}

<center>

<table>
	<colgroup>
				<col class="blue" />
				<col class="white" />
				<col class="white" />
				<col class="white" />
				<col class="blue" />
				<col class="white" />
				<col class="white" />
				<col class="white" />
				<col class="blue" />
				<col class="white" />
				<col class="white" />
				<col class="white" />
				<col class="blue" />
				<col class="white" />
				<col class="white" />
				<col class="white" />
				<col class="blue" />
				<col class="white" />
				<col class="white" />
				<col class="white" />
				<col class="blue" />
				<col class="white" />
			</colgroup>
	<tr class="border_bottom_b">
		<td><center><b>Name</b></center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
		<td><center><b>Length (km)</b></center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
		<td><center><b>Time (days)</b></center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
		<td><center><b>Map</b></center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
		<td><center><b>Weather</b></center></td>
		{% if user.is_authenticated and user.groups.get.name == 'guide'%}
				<td>&nbsp;&nbsp;&nbsp;</td>
			<td><center><b>Add</b></center></td>
				<td>&nbsp;&nbsp;&nbsp;</td>
		{% endif %}
	</tr>

{% if trails %}


	{% for trail in trails %}
	<tr class="border_bottom">
		<td><center>{{trail.0}}</center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
		<td><center>{{trail.1}}</center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
		<td><center>{{trail.2}}</center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
		<td><center><a href={{trail.3}} target="map">View</a></center></td>
			<td>&nbsp;&nbsp;&nbsp;</td>
			{%if trail.0  == 'Surround Beer Sheva' %}
			<td><center><a href="#popup_flight_travlDil1" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil1" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
		<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F295530&showtitle=false&type=js"></script>				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Carmila River and Ksalon River' %}
			<td><center><a href="#popup_flight_travlDil2" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil2" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F281184&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Clay Stream' %}
			<td><center><a href="#popup_flight_travlDil3" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil3" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F393598&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Golan Trail' %}
			<td><center><a href="#popup_flight_travlDil4" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil4" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F293825&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Jerusalem Trail' %}
			<td><center><a href="#popup_flight_travlDil5" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil5" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F281184&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Negev Mountain Trail' %}
			<td><center><a href="#popup_flight_travlDil6" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil6" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F294166&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Ramat Menashe Trail' %}
			<td><center><a href="#popup_flight_travlDil7" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil7" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F294946&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Sea to Sea Trail' %}
			<td><center><a href="#popup_flight_travlDil9" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil9" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F294117&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Springs Valley Trail' %}
			<td><center><a href="#popup_flight_travlDil10" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil10" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F295435&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Surround Ramon Crater' %}
			<td><center><a href="#popup_flight_travlDil8" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil8" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F294166&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}
		{%if trail.0  == 'Through The Gospel' %}
			<td><center><a href="#popup_flight_travlDil11" target="weather">Weather</a></center></td>
			<div id="popup_flight_travlDil11" class="overlay_flight_traveldil">
			<div class="popup_flight_travlDil">
				<h2>Weather</h2>
					<a class="close_flight_travelDl" href="#">&times;</a>
				<div class="content_flightht_travel_dil">
					<script src="//rss.bloople.net/?url=https%3A%2F%2Fweather-broker-cdn.api.bbci.co.uk%2Fen%2Fforecast%2Frss%2F3day%2F293322&showtitle=false&type=js"></script>
				</div>
			</div>
		</div>
		{%endif%}

		{% if user.is_authenticated and user.groups.get.name == 'guide'%}
		<td>&nbsp;&nbsp;&nbsp;</td>
			<td><center>
				<form method="POST" action="/addroute/{{trail.0}}" class="form-group">
					{% csrf_token %}
					{{form|crispy}}
					<br>
					{% if trail.0 not in guide_routes %}
					<button type="submit" class="btn btn-success">+</button>
					{% else %}
					<button type="submit" class="btn btn-danger">-</button>
					{% endif %}
				</form>
			<td>&nbsp;&nbsp;&nbsp;</td>
			</center></td>
		{% endif %}
	</tr>
	{% endfor %}

{% endif %}

</table>

<br>

<iframe name="map" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

<br><br>

</center>
{% if loc == 'Israel'%}
		<script src="//rss.bloople.net/?url=https%3A%2F%2Ffeeds.meteoalarm.org%2Ffeeds%2Fmeteoalarm-legacy-rss-israel&showtitle=false&type=js"></script>
	{% endif %}


{% endif %}
{% endblock %}